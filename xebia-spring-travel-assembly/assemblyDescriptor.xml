<?xml version="1.0" encoding="UTF-8"?>
<assembly
   xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
   <id>assembly</id>
   
   <formats>
      <format>dir</format>
   </formats>
   <includeBaseDirectory>true</includeBaseDirectory>
   <baseDirectory>hands-on-jprofiler</baseDirectory>

    <dependencySets>
       <dependencySet>
           <includes>
               <include>io.blep:tomcat:zip</include>
               <include>io.blep:jmeter:zip</include>
           </includes>
           <outputDirectory>/</outputDirectory>
           <fileMode>0755</fileMode>
           <directoryMode>0755</directoryMode>
           <unpack>true</unpack>
           <unpackOptions>
               <excludes>
                   <exclude>**/server.xml</exclude>
               </excludes>
           </unpackOptions>
       </dependencySet>
       <dependencySet>
           <includes>
               <include>org.hsqldb:hsqldb</include>
           </includes>
           <outputDirectory>/hsqldb</outputDirectory>
           <unpack>false</unpack>
       </dependencySet>
      <dependencySet>
         <includes>
            <include>fr.xebia.demo.travel:xebia-spring-travel-antifraud</include>
         </includes>
         <outputDirectory>apache-tomcat/webapps</outputDirectory>
         <outputFileNameMapping>antifraud.war</outputFileNameMapping>
         <unpack>false</unpack>
      </dependencySet>
      <dependencySet>
         <includes>
            <include>fr.xebia.demo.travel:xebia-spring-travel-ecommerce</include>
         </includes>
         <outputDirectory>apache-tomcat/webapps</outputDirectory>
         <outputFileNameMapping>ROOT.war</outputFileNameMapping>
         <unpack>false</unpack>
      </dependencySet>
   </dependencySets>

    <fileSets>
        <fileSet>
            <directory>${project.basedir}</directory>
            <includes>
                <include>*.sh</include>
                <include>*.bat</include>
            </includes>
            <filtered>true</filtered>
            <fileMode>0755</fileMode>
        </fileSet>
        <fileSet>
            <directory>data</directory>
            <outputDirectory>/hsqldb/data</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>jmeter-data</directory>
            <outputDirectory>/apache-jmeter-${jmeter.version}/data</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>tomcat-conf</directory>
            <outputDirectory>apache-tomcat/conf</outputDirectory>
        </fileSet>
    </fileSets>

</assembly>